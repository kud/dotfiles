#! /usr/bin/env zsh

source $MY/core/helper

# define cask application folder
export HOMEBREW_CASK_OPTS=--appdir=/Applications

# install brew if needed
if ! type "brew" > /dev/null; then
  echo_space
  echo_title_install "homebrew"
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# install zsh via brew if needed
if ! type "/usr/local/bin/zsh" > /dev/null; then
  echo_space
  echo_title_install "zsh"
  brewinstall zsh
  echo "/usr/local/bin/zsh" | sudo tee -a /etc/shells
  chsh -s /usr/local/bin/zsh $USER
  # sudo mv /etc/{zshenv,zprofile}
fi

# install bash via brew if needed
if ! type "/usr/local/bin/bash" > /dev/null; then
  echo_space
  echo_title_install "bash"
  brewinstall bash
  echo "/usr/local/bin/bash" | sudo tee -a /etc/shells
fi

# update/upgrade brew
echo_space
echo_title_update "brew"
brew update && brew upgrade && brew cask upgrade
# brew cask update # not needed anymore

# install brew packages
echo_space
echo_title_install "brew packages"

## tap
# brewtap caskroom/cask
brewtap homebrew/cask
# brewtap caskroom/fonts
brewtap homebrew/cask-fonts
# brewtap caskroom/versions
brewtap homebrew/cask-versions
# brewtap docmunch/pdftk
# brewtap aredridel/iojs

## system
brewinstall ssh-copy-id
brewinstall make
brewinstall archey # system information
brewinstall mitmproxy
brewinstall pv
brewinstall md5sha1sum
brewinstall tree
brewinstall ncdu
brewinstall htop
brewinstall iftop
brewinstall pwgen
brewinstall exiftool
brewinstall grep
brewinstall pcre2
brewinstall htmlcompressor
brewinstall mozjpeg
brewinstall gifsicle
brewinstall ffmpeg --with-libass --with-fontconfig
brewinstall rename
brewinstall exa # Modern replacement for 'ls' — https://the.exa.website
brewinstall less # because the macOS built-in version is old
# brewinstall terminal-notifier
brewinstall p7zip
brewinstall autojump
brewinstall brightness
brewinstall monitorcontrol
brewinstall z
brewinstall ripgrep

## network
brewinstall rsync
brewinstall wget
brewinstall curl
brewinstall lsof
brewinstall tcpflow # analyse tcp requests
brewinstall mtr
brewinstall dnsmasq

## zsh
### already in prezto, unneeded
# brewinstall zsh-syntax-highlighting
# brewinstall zsh-completions
# brewinstall zsh-history-substring-search

## git
brewinstall git
brewinstall ghi
brewinstall tig
brewinstall hub

## editors
brewinstall vim

## languages
brewinstall zlib # needed for python
brewinstall readline # needed for python
brewinstall xz # needed for python

brewinstall ruby
brewinstall python # however, will be installed via pyenv after
brewinstall python3 # however, will be installed via pyenv after
brewinstall pyenv
brewinstall pyenv-virtualenv
brewinstall node
# brewinstall watchman

## communication
# brewinstall bitlbee # bridges for irc

## sync/backup
brewinstall syncthing

## others
brewinstall heroku/brew/heroku
brewinstall youtube-dl
brewinstall pdf-redact-tools
brewinstall imagemagick --with-fontconfig
brewinstall mas # Mac App Store command line interface - https://github.com/mas-cli/mas
# brewinstall pdftk
brewinstall bat # https://github.com/sharkdp/bat

echo_space
echo_title "Cleaning brew..."
brew cleanup

# install apps
echo_space
echo_title_install "apps"

# caskinstall dropbox
# if [ ! -d "$HOME/Dropbox" ]; then
#   read \?"Configure now your dropbox and press [Enter] when you've finished..."
# fi

caskinstall sync
if [ ! -d "$HOME/Sync" ]; then
  read \?"Configure now your sync and press [Enter] when you've finished..."
fi

caskinstall java # sorry my love :(
# caskinstall alfred
caskinstall flux
# caskinstall iterm2
caskinstall iterm2-nightly
# caskinstall iterm2-beta
caskinstall appcleaner
# caskinstall keepassx
caskinstall macpass
caskinstall spectacle
caskinstall grandperspective
caskinstall cloudup
caskinstall xquartz
caskinstall flash-player
caskinstall qlcolorcode
caskinstall qlstephen
caskinstall qlmarkdown
caskinstall quicklook-json
caskinstall quicklook-csv
caskinstall prefs-editor
caskinstall qlprettypatch
# caskinstall betterzip
caskinstall suspicious-package
caskinstall android-file-transfer
caskinstall kap
caskinstall etrecheckpro
caskinstall monodraw
# caskinstall skitch # https://evernote.com/skitch/
# caskinstall flashlight
caskinstall github-beta
caskinstall gitkraken
caskinstall gitup
caskinstall xrg
caskinstall molotov
caskinstall insomnia # REST Client — https://insomnia.rest/

caskinstall font-ubuntu
caskinstall font-ubuntu-mono-derivative-powerline
caskinstall font-fira-code

caskinstall font-3270-nerd-font
caskinstall font-3270-nerd-font-mono
caskinstall font-anonymouspro-nerd-font
caskinstall font-anonymouspro-nerd-font-mono
caskinstall font-arimo-nerd-font
caskinstall font-arimo-nerd-font-mono
caskinstall font-aurulentsansmono-nerd-font
caskinstall font-aurulentsansmono-nerd-font-mono
caskinstall font-bitstreamverasansmono-nerd-font
caskinstall font-bitstreamverasansmono-nerd-font-mono
caskinstall font-codenewroman-nerd-font
caskinstall font-codenewroman-nerd-font-mono
caskinstall font-cousine-nerd-font
caskinstall font-cousine-nerd-font-mono
caskinstall font-dejavusansmono-nerd-font
caskinstall font-dejavusansmono-nerd-font-mono
caskinstall font-droidsansmono-nerd-font
caskinstall font-droidsansmono-nerd-font-mono
caskinstall font-fantasquesansmono-nerd-font
caskinstall font-fantasquesansmono-nerd-font-mono
caskinstall font-firacode-nerd-font
caskinstall font-firacode-nerd-font-mono
caskinstall font-firamono-nerd-font
caskinstall font-firamono-nerd-font-mono
caskinstall font-go-mono-nerd-font
caskinstall font-go-mono-nerd-font-mono
caskinstall font-gohu-nerd-font
caskinstall font-gohu-nerd-font-mono
caskinstall font-hack-nerd-font
caskinstall font-hack-nerd-font-mono
caskinstall font-hasklig-nerd-font
caskinstall font-hasklig-nerd-font-mono
caskinstall font-heavydata-nerd-font
caskinstall font-heavydata-nerd-font-mono
caskinstall font-hermit-nerd-font
caskinstall font-hermit-nerd-font-mono
caskinstall font-inconsolata-nerd-font
caskinstall font-inconsolata-nerd-font-mono
caskinstall font-inconsolatago-nerd-font
caskinstall font-inconsolatago-nerd-font-mono
caskinstall font-inconsolatalgc-nerd-font
caskinstall font-inconsolatalgc-nerd-font-mono
caskinstall font-iosevka-nerd-font
caskinstall font-iosevka-nerd-font-mono
caskinstall font-lekton-nerd-font
caskinstall font-lekton-nerd-font-mono
caskinstall font-liberationmono-nerd-font
caskinstall font-liberationmono-nerd-font-mono
caskinstall font-meslo-nerd-font
caskinstall font-meslo-nerd-font-mono
caskinstall font-monofur-nerd-font
caskinstall font-monofur-nerd-font-mono
caskinstall font-monoid-nerd-font
caskinstall font-monoid-nerd-font-mono
caskinstall font-mononoki-nerd-font
caskinstall font-mononoki-nerd-font-mono
caskinstall font-mplus-nerd-font
caskinstall font-mplus-nerd-font-mono
caskinstall font-noto-nerd-font
caskinstall font-noto-nerd-font-mono
caskinstall font-profont-nerd-font
caskinstall font-profont-nerd-font-mono
caskinstall font-proggyclean-nerd-font
caskinstall font-proggyclean-nerd-font-mono
caskinstall font-robotomono-nerd-font
caskinstall font-robotomono-nerd-font-mono
caskinstall font-sharetechmono-nerd-font
caskinstall font-sharetechmono-nerd-font-mono
caskinstall font-sourcecodepro-nerd-font
caskinstall font-sourcecodepro-nerd-font-mono
caskinstall font-spacemono-nerd-font
caskinstall font-spacemono-nerd-font-mono
caskinstall font-terminus-nerd-font
caskinstall font-terminus-nerd-font-mono
caskinstall font-tinos-nerd-font
caskinstall font-tinos-nerd-font-mono
caskinstall font-ubuntu-nerd-font
caskinstall font-ubuntu-nerd-font-mono
caskinstall font-ubuntumono-nerd-font
caskinstall font-ubuntumono-nerd-font-mono

# caskinstall sublime-text3
caskinstall sublime-text-dev
# caskinstall $MY/patches/sublime-text-3207.rb
# if ! type "subl" > /dev/null; then
#   ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl
# fi
caskinstall firefox-nightly
caskinstall atom
caskinstall limechat
caskinstall discord
caskinstall deluge
caskinstall imagealpha
caskinstall imageoptim
# caskinstall mysimbl
caskinstall spotify
caskinstall steam
caskinstall kodi
caskinstall vlc
# caskinstall vlc-nightly
caskinstall slack
caskinstall image2icon
caskinstall rocket
# caskinstall beardedspice # http://beardedspice.github.io/
caskinstall macmediakeyforwarder
caskinstall mark-text # https://marktext.github.io/website/
caskinstall steermouse # http://plentycom.jp/en/steermouse/
# caskinstall nativedisplaybrightness
# caskinstall gfxcardstatus # https://gfx.io/
# caskinstall background-music
caskinstall background-music-pre
caskinstall fliqlo
caskinstall tyke
caskinstall cheatsheet

source $MY/profiles/$OS_PROFILE/core/brew 2> /dev/null

echo_space
echo_title "Cleaning brew cask..."
brew cleanup

